---
import { siteMetaData } from '~/constants/meta-data'
import { t } from '~/i18n'
import { getPreferredLanguage } from '~/utils/language'

const pathname = Astro.originPathname.replace(/\/$/, '') + Astro.url.search
const renderTime = Astro.locals.renderTime

const acceptLanguage = Astro.request.headers.get('accept-language')
const userLanguage = getPreferredLanguage(acceptLanguage)
---

<footer>
  <p>{t(userLanguage, 'footer:tagline')}</p>
  <p>
    {t(userLanguage, 'footer:viewPageOn')}
    <a href={`https://suttacentral.net${pathname}`}>SuttaCentral.net</a>
  </p>
  <p>{t(userLanguage, 'footer:renderedIn').replace('{time}', renderTime)}</p>
  <ul>
    <li>
      <a href={siteMetaData.source}>{t(userLanguage, 'footer:openSource')}</a>
    </li>
    <li>
      <a href={siteMetaData.analytics}
        >{t(userLanguage, 'footer:openAnalytics')}</a
      >
    </li>
    <li>
      <a href={siteMetaData.suggestions}
        >{t(userLanguage, 'footer:ideasAndBugs')}</a
      >
    </li>
  </ul>
</footer>

<style>
  footer {
    background-color: var(--footer-background-color);
    margin-top: 2rem;
    text-align: center;
    padding: 1rem;
    color: var(--headings-color);

    p:first-of-type {
      font-weight: 800;
    }

    p:nth-of-type(2) {
      font-weight: 600;
    }

    ul {
      max-width: var(--content-max-width);
      margin: 1rem auto;
      list-style: none;
      padding: 0;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;

      li:not(li:last-of-type) {
        margin-right: 0.5rem;

        &::after {
          content: 'âˆ™';
          margin-left: 0.3rem;
        }
      }
    }
  }
</style>
